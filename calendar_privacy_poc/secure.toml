[components]
calendar_reader = "components/calendar_reader.wasm"
web_searcher = "components/web_searcher.wasm"
llm_provider = "components/llm_provider.wasm"
# Removed orchestrator, context_analyzer, matcher as they are replaced by the workflow logic

[wiring]
# Calendar Reader Access
"calendar_reader.wasi:filesystem/types" = "host.wasi:filesystem/types"

# Web Searcher Access
"web_searcher.wasi:http/outgoing-handler" = "host.wasi:http/outgoing-handler"


[[workflow.steps]]
id = "get_slots"
component = "calendar_reader"
function = "local:calendar-privacy/calendar-api.get-free-slots"
# No input needed

[[workflow.steps]]
id = "analyze_state"
component = "llm_provider"
function = "local:calendar-privacy/llm-api.predict-state"
input = "Analyze this schedule and determine my state: {{ get_slots.output }}"

[[workflow.steps]]
id = "search_events"
component = "web_searcher"
function = "local:calendar-privacy/search-api.search"
input = "fun events for {{ analyze_state.output }} person"
